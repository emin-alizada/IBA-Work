<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Transaction Confirmation page</title>

    <style type="text/css">
        body {
            font-family: Verdana, Arial, Helvetica, sans-serif;
        }

        .tdesc tr td:first-child {
            font-weight: bold;
        }

        TD {
            padding-top: 6px;
            padding-left: 10px;
            padding-bottom: 6px;
            font-family: Helvetica, Arial, Verdana, sans-serif;
            font-size: 13px;
            color: #044E7C;
        }

        button {
            padding: 0.5em;
        }


        .MAINoutline {
            border: 1px solid #E4E1E1;
            border-radius: 3%;
        }

        /*.tdesc {
            border-collapse: collapse;
            border-right: solid 1px gray;
            border-top: solid 1px gray;
            padding: 0.5em;
            margin: 0;
            !* width: 40em; *!
        }*/

        .tdesc tr {
            line-height: 1.5em;
        }

        .tdesc td {
            /*float: left;*/
            /*border-left: solid 1px gray;*/
            /*border-bottom: solid 1px gray;*/
            text-align: left;
            margin: 0;
            padding-left: 1em;
            padding-right: 1em;
        }

        .fname {
            text-align: left;
        }

        .buttons {
            border: none;
        }

        .buttons td {
            margin: 0;
            padding-left: 2em;
            padding-right: 2em;
            border: none;
        }

        select:invalid {
            color: gray;
        }

        select {
            padding: 0.5em;
        }


    </style>

    <script type="text/javascript">

        var jsonObj;

        function init() {
            var inst = "%491";
            if ("%62".length < 1) document.getElementById("f62row").style.display = "none";
            if ("%53".length < 1) document.getElementById("f53row").style.display = "none";
            if ("%55".length < 1) document.getElementById("f55row").style.display = "none";
            if ("%157".length < 1) document.getElementById("f157row").style.display = "none";

            if (inst.length > 0) {
                jsonObj = eval(b64DecodeUnicode(inst));
                var sel_el = document.getElementById('selectInstId');

                for (i = 0; i < jsonObj.length; i += 1) {
                    option = document.createElement('option');
                    option.value = jsonObj[i].INST_ID;
                    option.text = jsonObj[i].INST_NAME;
                    sel_el.add(option);
                }
            }
        }

        function clickCancelHandler(submit) {
            addInputValue("ACQ_INST_PAYIN", "NONE");
        }

        function clickPayHandler(submit) {
            var e = document.getElementById("selectInstId");
            var instType = e.options[e.selectedIndex].value;
            addInputValue("ACQ_INST_PAYIN", instType);
        }


        function submitHandler(form) {
            return true;
        }

        function b64DecodeUnicode(str) {
            return decodeURIComponent(atob(str).split('').map(function (c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));
        }

        function createInstTableCell(name, val) {
            var table = document.getElementById("instTable")
            var tr = document.createElement('tr');
            var td = document.createElement('td');
            td.appendChild(document.createTextNode(name));
            tr.appendChild(td);
            td = document.createElement('td');
            td.appendChild(document.createTextNode(val));
            td.setAttribute("id", name);
            tr.appendChild(td);
            table.appendChild(tr);
        }

        function OnChangeInstallment(chosen) {
            for (i = 0; i <= jsonObj.length; i += 1) {

                if (jsonObj[i].INST_ID == chosen) {
                    document.getElementById("btnPayInst").disabled = false;
                    var el = document.getElementById("INST_ID")

                    if (typeof (el) != 'undefined' && el != null) {
                    document.getElementById("INST_ID").innerHTML = jsonObj[i].INST_ID;
                        document.getElementById("INST_CODE").innerHTML = jsonObj[i].INST_CODE;
                        document.getElementById("INST_NUM").innerHTML = jsonObj[i].INST_NUM;
                        document.getElementById("INST_AMNT").innerHTML = jsonObj[i].INST_AMNT;
                        document.getElementById("INST_FREE_PERIOD").innerHTML = jsonObj[i].INST_FREE_PERIOD;
                        document.getElementById("SHIFT_NUM").innerHTML = jsonObj[i].SHIFT_NUM;
                        document.getElementById("INST_FTOTAL").innerHTML = jsonObj[i].INST_FTOTAL;
                        document.getElementById("INST_FRATE").innerHTML = jsonObj[i].INST_FRATE;
                        document.getElementById("INST_IRATE").innerHTML = jsonObj[i].INST_FRATE;
                    } else {
                    createInstTableCell("INST_ID", jsonObj[i].INST_ID);
                        createInstTableCell("INST_CODE", jsonObj[i].INST_CODE);
                        createInstTableCell("INST_NUM", jsonObj[i].INST_NUM);
                        createInstTableCell("INST_AMNT", jsonObj[i].INST_AMNT);
                        createInstTableCell("INST_FREE_PERIOD", jsonObj[i].INST_FREE_PERIOD);
                        createInstTableCell("SHIFT_NUM", jsonObj[i].SHIFT_NUM);
                        createInstTableCell("INST_FTOTAL", jsonObj[i].INST_FTOTAL);
                        createInstTableCell("INST_FRATE", jsonObj[i].INST_FRATE);
                        createInstTableCell("INST_FRATE", jsonObj[i].INST_FRATE);
                        document.getElementById("instTable").style.visibility = "visible";
                    }

                    break;
                }
            }
        }

        function addInputValue(n, v) {
            var el = document.createElement('input');
            el.setAttribute('type', 'hidden');
            el.setAttribute('name', n);
            el.setAttribute('value', v);
            document.getElementById("cform").appendChild(el);
        }

    </script>

</head>
<body leftmargin="0" rightmargin="0" onload="init()">
<div style="text-align: center;">
    <table class="MAINoutline" align="center" border="0" cellpadding="0" cellspacing="0" width="687">
        <tbody>
        <tr>
            <td colspan="2" align="left" valign="top">
                <table>
                    <tbody>
                    <tr>
                        <td class="neutralTD" align="center" valign="top">
                            <img src="/ow/pic/AZCLOGO.jpg" width="260" style="padding: 5%">
                        </td>
                    </tr>

                    <tr>
                        <td style="padding-top: 20px" class="neutralTD" align="center" valign="top">
                        <span style="font-weight: bold; color: #224466; font-size: small; " align="center">
                            <h2>Taksitin təsdiq edilməsi</h2>
                            <h4>Zəhmət olmasa, aşağıdakı əməliyyatın xülasəsini yoxlayın.<br/>
                                Seçilmiş taksit əməliyyatına davam etmək üçün "Taksitlə Ödə" düyməsini basın, əks halda "Ləğv et" seçin.</h4>
                        </span>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </td>
        </tr>

        <tr>
            <td colspan="2" align="left" valign="top">
                <form id="cform" action="/cgi-bin/cgi_link" method="POST" onsubmit="return submitHandler(this);">

                    <table COLS=2 class="tdesc" align="center" border="0" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="fname">Kartın nömrəsi</td>
                            <td>%12</td>
                        </tr>
                        <tr>
                            <td class="fname">Əməliyyat məbləği</td>
                            <td>%25 %26</td>
                        </tr>
                        <tr id="f157row">
                            <td class="fname">Komissiya haqqı</td>
                            <td>%157 %191</td>
                        </tr>
                        <tr>
                            <td class="fname">Sifariş nömrəsi</td>
                            <td>%27</td>
                        </tr>
                        <tr>
                            <td class="fname">Sifarişin təsviri</td>
                            <td>%58</td>
                        </tr>
                        <tr id="f53row">
                            <td class="fname">Satıcının adı</td>
                            <td>%53</td>
                        </tr>
                        <tr id="f55row">
                            <td class="fname">Satıcı URL-i</td>
                            <td>%55</td>
                        </tr>
                        <tr id="f62row">
                            <td class="fname">Ödəniş</td>
                            <td>%62</td>
                        </tr>
                    </table>
                    <br/>
                    <div class="custom-select" align="center">
                        <label for="selectInstId"></label>
                        <select id="selectInstId"
                                onChange="OnChangeInstallment(this.options[this.selectedIndex].value)">
                            <option value="" disabled selected hidden>Zəhmət olmasa, Taksit növünü seçin ...</option>
                        </select>
                        <br/><br/>
                        <table id="instTable" cols=2 class="tdesc" style="visibility:hidden">

                        </table>
                    </div>


                    <br/><br/>
                    <input TYPE="HIDDEN" NAME="VINST_FID" VALUE="%255"/>
                    <input TYPE="HIDDEN" NAME="TERMINAL" VALUE="%21"></input>
                    <input TYPE="HIDDEN" NAME="TIMESTAMP" VALUE="%47"></input>
                    <input TYPE="HIDDEN" NAME="TRTYPE" VALUE="%22"></input>
                    <!--     Submit buttons    -->
                    <table align="center" cols="2" class="buttons">
                        <tr>
                            <td>
                                <button id="btnPayInst" disabled=true type="submit" name="CONFIRM" value="Y"
                                        onclick="return clickPayHandler(this)">
                                    Taksitlə ödə
                                </button>
                            </td>
                            <td>
                                <button type="submit" name="CONFIRM" value="N"
                                        onclick="return clickCancelHandler(this)">
                                    Ləğv et
                                </button>
                            </td>
                        </tr>
                    </table>

                </form>
            </td>
        </tr>

        </tbody>
    </table>
    <center>
        <table>
            <tr>
                <td class="neutralTD" align="center" valign="top">
                    <img src="/pics/cchead.gif" height="63" width="383">
                </td>
            </tr>
            <tr>
                <td class="neutralTD" align="center" valign="top">
                    <img src="/pics/blind.gif" height="20" width="1">
                </td>
            </tr>
        </table>
        <table align="center" border="0" cellpadding="0" cellspacing="0" width="450">
            <tbody>
            <tr>
                <td class="smallFONT3" align="center">
                    Copyright 2008-2020 3D-Secure payment services provided by AzeriCard.
                </td>
            </tr>
            </tbody>
        </table>
    </center>
</div>

</body>
</html>
